# S-LOG

> 위즈윅 에디터 기반으로 작성 가능한 블로그

## 목차

- [1. 프로젝트 소개](#1-프로젝트-소개)
- [2. API Table](#2-api-table)
- [3. 구현기능](#3-구현-기능)
- [4. 트러블](#4-issue)

## 1. 프로젝트 소개

- 프로젝트 제목 : S-LOG
- 프로젝트 간단 설명 : 리액트, 리덕스Thunk 기반으로 제작한 블로그 플랫폼

## 2. API Table

| 이름                  | URL          | Method | request                                                      | params             |
| :-------------------- | :----------- | :----- | :----------------------------------------------------------- | :----------------- |
| 게시글 목록 전체 조회 | `/posts`     | GET    |                                                              |                    |
| 게시글 상세 조회      | `/posts/:id` | GET    |                                                              | {'user',`postId``} |
| 게시글 작성           | `/posts`     | POST   | {'post':{title,body,tags:[]},'username','id','publishedDate} |                    |
| 게시글 수정           | `/posts/:id` | PATCH  | {'post':{ title,body,tags:[] } }                             |                    |
| 게시글 삭제           | `/posts/:id` | DELETE | {'postId'}                                                   | {postId}           |
| 회원가입              | `/register`  | POST   | {’id’:id,'password':password}                                |                    |
| 로그인                | `/login`     | POST   | {’id’:id,'password':password}                                |                    |

## 3. 구현기능

### 로그인 / 회원가입

- JWT 토큰 활용하여 유저 체킹 및 새로고침 시 로그인 유지
- 토큰 유효기간 60분 만료 시 로그아웃 기능 구현
- 로그인 시 로그인/회원가입 페이지 접근 차단
- 로그아웃 시 게시글 작성 페이지 접근 차단
- 비로그인 시 게시물은 볼 수 있으며 해당페이지에서 로그인 시 기존 페이지로 이동

### 게시글 CRUD

- 포스팅 관련 CRUD 모두 구현
- 게시글 내용 작성 시 위지윅 에디터(Quill)로 작성 가능
- 게시글의 작성자 이름 클릭 시 해당 작성자 게시글만 조회 가능

### Not Found

- 잘못된 경로 입력 시 Not Found페이지 이동 후 2.5초 뒤 홈으로 이동.

## 4. issue

### 1. Redux Store State Initial

- 게시글 수정완료 혹은 취소 후 새 게시글 작성시 마지막으로 수정했던 게시글에 덮어 씌워지는 문제
- 위 내용관련해서 글 작성 시 등록버튼이 수정버튼으로 보이는 문제
- 로그아웃 후 로그인시 로그인 과정없이 바로 로그인 되는 문제
- 로그인 시 오류 발생 후 재로그인이 안되는 문제

> 해당 문제들 모두 dispatch하여 state를 변경하는 과정에서 extraReducer에서 state를 초기화 시켜주지 않아 발생.<br>
> 오류 발생 후 해당 오류 state를 null초기화 및 기능 수행 중 취소 시 state초기화 시키는 것으로 해결 완료.

### 2. JWT 토큰 60분 만료 시 발생하는 에러를 핸들링

- 60분 만료 시 어느 페이지에 있던지 체킹을 하고 알려주어야 하는데 모든 페이지에서 검사하기에는 비효율적임.

> 공통이 되는 헤더 컴포넌트에서 유저 체크를 진행.<br>
> 헤더가 리렌더링 될 때마다 서버와 통신하여 토큰을 체크진행.<br>
> 오류 발생 시 핸들링하여 사용자에게 알림을 띄우고 로그인 페이지로 이동.
